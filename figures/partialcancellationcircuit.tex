\begin{circuitikz}
    \ctikzset{quadpoles style=inline}

    % Voltage source
    \draw (0,-3) to[sV, l=$V_\text{pa}$] (0,2);

    % I_L
    \draw (0,2) to[short, i^=$i_\text{L}(t)$] (1,2);

    % Winding resistance 
    \draw (1,2) to[R, R=$R_{w}$] (3,2);

    % Transformer
    \draw (6,2) node[transformer core, anchor=A1] (T) {}
      (T.A1) -- ++(-1.5,0) coordinate(TPa)
      (T.A2) to[short] ++(-1.5,0) coordinate(MDa);

    \draw (TPa) to[L, L=$L_\text{m}$] (MDa);
    \draw (TPa) to[short] ++(-1.5,0) coordinate(TP);
    \draw (MDa) to[short] ++(-1.5,0) coordinate(MD);
    \draw (TP) to[R=$R_\text{core}$] (MD);

    \draw (T.B1) -- ++(.5, 0) coordinate(TPb)
    to[open, v^<=$$, o-o] (TPb |- T.B2)
    -- (T.B2);

    % manually add v2 label
    \node[right] at (TPb -| T.B1) [xshift=0.5cm, yshift=-1.1cm] {$v_2(t)$};

  % Turns ratio label
    \node at ($(T.A1)!0.5!(T.B1)$) [above=0cm] {$N_p : N_s$};

    % Capacitor
    \draw (MD) to[C, a=$C_\text{s}$, v^=$v_C(t)$] (3,-3);

    \draw (3,-3) -- (0,-3);

    % Dashed box around Rw, Rcore, Lm, and transformer
    \draw[dashed] (1, 3) rectangle (8.3, -.5)
    node[above, midway, yshift=2cm, font=\itshape] {Wound toroid};

\end{circuitikz}
